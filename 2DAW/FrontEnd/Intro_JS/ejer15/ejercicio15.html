<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Ejercicio 15 - Información sobre eventos</title>

<style type="text/css">
body {font-family: arial, helvetica;}
#info {width:160px; border:thin solid silver; padding:.5em; position:fixed;}
#info h1 {margin: 0;}
</style>

<script type="text/javascript">
function isIE(){
    return navigator.userAgent.toLowerCase().indexOf('msie')!=-1;
}

function muestraInformacion(mensaje) {
    document.getElementById("info").innerHTML = '<h1>'+mensaje[0]+'</h1>';
    for(var i=1; i<mensaje.length; i++) {
        document.getElementById("info").innerHTML += '<p>'+mensaje[i]+'</p>';
    }
}

// Mouse events
function mouseClientCoords(trigger){
    var x_coord;
    var y_coord;

    if(isIE()){
        x_coord = trigger.clientX + document.body.scrollLeft;
        y_coord = trigger.clienty + document.body.scrollTop;
    } else {
        x_coord = trigger.pageX;
        y_coord = trigger.pageY;
    }

    return [x_coord, y_coord];
}

function mouseScreenCoords(trigger){
    var x_coord = trigger.screenX
    var y_coord = trigger.screenY;

    return [x_coord, y_coord];
}

function coordString(array){
    return "[" + array[0].toString() + ", " + array[1].toString() + "]";
}

function mousePositions(trigger){
    trigger = trigger || window.trigger;

    if(trigger.type == 'click'){
        document.getElementById('info').style.backgroundColor = 'red';
    } else {
        document.getElementById('info').style.backgroundColor = 'white';
    }
    var client = mouseClientCoords(trigger);
    var window_pos = mouseScreenCoords(trigger);

    muestraInformacion(['Ratón', 
                        'ventana ' + coordString(client),
                        'escritorio ' + coordString( window_pos)]);
}

//Keyboard events
function keyCharAndCode(trigger){
    var result = [];
    result.push(trigger.charCode);
    result.push(String.fromCharCode(trigger.charCode)); 

    return result;
}

function keyboardPress(trigger){
    trigger = trigger || window.trigger;
    var keyboardInfo = keyCharAndCode(trigger);
    muestraInformacion([ 'Teclado' ,
                        'Char Code: ' + keyboardInfo[0],
                        'Character: ' + keyboardInfo[1]]);
    document.getElementById('info').style.backgroundColor= 'yellow';
}

window.onload = function(){
    document.onmouseover = mousePositions;
    document.onkeypress = keyboardPress;
    document.onclick = mousePositions;
};

</script>
</head>

<body><script type="text/javascript">
//<![CDATA[
try{(function(a){var b="http://",c="librosweb.es",d="/cdn-cgi/cl/",e="img.gif",f=new a;f.src=[b,c,d,e].join("")})(Image)}catch(e){}
//]]>
</script>

<div id="info"></div>

<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>

</body>
</html>
