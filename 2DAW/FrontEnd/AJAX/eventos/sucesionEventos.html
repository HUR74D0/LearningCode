<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title></title>
        
    </head>
    <body>
            <div id="div1">
                
                <div id="div2">
                    
                    <div id="div3">
                        <button id="boton" type="submit">Pulsa aqu√≠</button>
                    </div>
                </div>
            </div>

            <script type="text/javascript" charset="utf-8">
                var $button = document.getElementById("boton");
                var $div1 = document.getElementById("div1");
                var $div2 = document.getElementById("div2");
                var $div3 = document.getElementById("div3");

                var eventHandler = function(){
                    var text = "Has pulsado el " + this.getAttribute("id");
                    alert(text);
                    this.removeEventListener("click", eventHandler);
                    this.addEventListener("click", executeAndDestroy, true);
                }
                
                var executeAndDestroy = function(){
                    var text = "Has pulsado el " + this.getAttribute("id");
                    alert(text);
                    this.removeEventListener("click", executeAndDestroy, true);
                }

                $button.addEventListener("click",eventHandler)

                $div1.addEventListener("click", eventHandler);
                $div2.addEventListener("click", eventHandler);
                $div3.addEventListener("click", eventHandler);
            </script>
    </body>
</html>
